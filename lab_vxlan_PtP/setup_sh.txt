#!/bin/bash

sudo docker exec -it clab-lab_vxlan_PtP-PC1 ip addr add 192.168.1.1/24 dev eth1
sudo docker exec -it clab-lab_vxlan_PtP-PC1 ip link set eth1 up

sudo docker exec -it clab-lab_vxlan_PtP-PC2 ip addr add 192.168.1.2/24 dev eth1
sudo docker exec -it clab-lab_vxlan_PtP-PC2 ip link set eth1 up

sudo docker exec -it clab-lab_vxlan_PtP-router1 ip link add vxlan100 type vxlan id 100 dstport 4789 local 10.1.1.1 remote 10.1.1.2
sudo docker exec -it clab-lab_vxlan_PtP-router1 brctl addbr br100
sudo docker exec -it clab-lab_vxlan_PtP-router1 brctl addif br100 vxlan100
sudo docker exec -it clab-lab_vxlan_PtP-router1 brctl stp br100 off
sudo docker exec -it clab-lab_vxlan_PtP-router1 ip link set up dev br100
sudo docker exec -it clab-lab_vxlan_PtP-router1 ip link set up dev vxlan100
sudo docker exec -it clab-lab_vxlan_PtP-router1 brctl addif br100 eth2

sudo docker exec -it clab-lab_vxlan_PtP-router2 ip link add vxlan100 type vxlan id 100 dstport 4789 local 10.1.1.2 remote 10.1.1.1
sudo docker exec -it clab-lab_vxlan_PtP-router2 brctl addbr br100
sudo docker exec -it clab-lab_vxlan_PtP-router2 brctl addif br100 vxlan100
sudo docker exec -it clab-lab_vxlan_PtP-router2 brctl stp br100 off
sudo docker exec -it clab-lab_vxlan_PtP-router2 ip link set up dev br100
sudo docker exec -it clab-lab_vxlan_PtP-router2 ip link set up dev vxlan100
sudo docker exec -it clab-lab_vxlan_PtP-router2 brctl addif br100 eth2